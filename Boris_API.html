<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8" /><title>2&nbsp;Boris API</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="racket.css" title="default" /><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default" /><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Boris The (Web) Spider</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Boris_Quickstart_Guide.html" class="tocviewlink" data-pltdoc="x">Boris Quickstart Guide</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Boris API</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Boris_Internals_and_Extension.html" class="tocviewlink" data-pltdoc="x">Boris Internals and Extension</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Boris API</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#%28part._.Overview_of_.Boris%29" class="tocviewlink" data-pltdoc="x">Overview of Boris</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#%28part._.The_.Web%29" class="tocviewlink" data-pltdoc="x">The Web</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#%28part._.I.O%29" class="tocviewlink" data-pltdoc="x">IO</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#%28part._.Selectors%29" class="tocviewlink" data-pltdoc="x">Selectors</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#%28part._.Overview_of_.Boris%29" class="tocsubseclink" data-pltdoc="x">Overview of Boris</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#%28part._.The_.Web%29" class="tocsubseclink" data-pltdoc="x">The Web</a></td></tr><tr><td><span class="tocsublinknumber">2.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Navigation%29" class="tocsubseclink" data-pltdoc="x">Navigation</a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._go%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">go</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._submit%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">submit</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Extraction%29" class="tocsubseclink" data-pltdoc="x">Extraction</a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._extract%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">extract</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._extract%2Flist%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">extract/<span class="mywbr"> &nbsp;</span>list</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Binding%29" class="tocsubseclink" data-pltdoc="x">Binding</a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._let%2Fweb%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">let/<span class="mywbr"> &nbsp;</span>web</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._var%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym"><span class="RktValLink">var</span></span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._for%2Fweb%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">for/<span class="mywbr"> &nbsp;</span>web</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.2.4<tt>&nbsp;</tt></span><a href="#%28part._.Control%29" class="tocsubseclink" data-pltdoc="x">Control</a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._label%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">label</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._recur%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">recur</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#%28part._.I.O%29" class="tocsubseclink" data-pltdoc="x">IO</a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._show%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">show</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._boris%2Fmain..rkt%29._download%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris"><span class="RktSym">download</span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#%28part._.Selectors%29" class="tocsubseclink" data-pltdoc="x">Selectors</a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._head%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">head</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._body%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">body</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._url%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">url</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._previous-request%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">previous-<wbr></wbr>request</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">var</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">xpath</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%2Ftext%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">xpath/<span class="mywbr"> &nbsp;</span>text</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._forms%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">forms</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._links%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">links</span></span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._links%2Ftext%29%29" class="tocsubnonseclink" data-pltdoc="x"><span title="Provided from: boris/selectors"><span class="RktSym"><span class="RktValLink">links/<span class="mywbr"> &nbsp;</span>text</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">5.90.0.9</span></div><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Boris_Quickstart_Guide.html" title="backward to &quot;1 Boris Quickstart Guide&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Boris The (Web) Spider&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Boris_Internals_and_Extension.html" title="forward to &quot;3 Boris Internals and Extension&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._.Boris_.A.P.I)"></a><a name="(mod-path._boris)"></a>Boris API</h3><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Evan Donahue</p></span></div><p><table cellspacing="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" data-pltdoc="x"><span class="RktSym">boris</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">boris</span></span></td></tr></table></p><h4>2.1<tt>&nbsp;</tt><a name="(part._.Overview_of_.Boris)"></a>Overview of Boris</h4><p>Boris has three core concepts:</p><ul><li><p>A web is a program structure
defining the urls to visit and the data to extract.</p></li><li><p>A spider is a function that interprets the web and performs the crawl, handling concerns external to the web logic such as caching,
robots.txt, and timing policies.</p></li><li><p>The flies are the data extracted by the spider as it traverses the web and returned to the host program (via return value, yield, etc.).</p></li></ul><h4>2.2<tt>&nbsp;</tt><a name="(part._.The_.Web)"></a>The Web</h4><p>A web is a tree in which each node is a function. The function accepts the current crawl state (containing the current page, environment bindings, and position in the web) and returns a list of "next" states. The spider then executes the subsequent portions of the web for each of these states in turn. In this way, Boris forms can inherently express concepts such as branching (an empty list prunes the sub-tree beneath the current node) and iteration (a full list repeats
the sub-tree code for each state). This way, concepts such as "follow every link in the navigation div" have natural expressions in Boris.</p><p>All of Boris&rsquo; basic web forms translate to one of five semantic operations: <a href="#%28part._.Navigation%29" data-pltdoc="x">Navigation</a>, <a href="#%28part._.Extraction%29" data-pltdoc="x">Extraction</a>, <a href="#%28part._.Binding%29" data-pltdoc="x">Binding</a>, <a href="#%28part._.Control%29" data-pltdoc="x">Control</a>, or <a href="#%28part._.I.O%29" data-pltdoc="x">IO</a>. Because a web is a simple tree of functions, however, it is possible to add new forms at runtime simply by modifying the tree. In addition to web-spinning forms, Boris also comes with a number of utilities listed under <a href="#%28part._.Selectors%29" data-pltdoc="x">Selectors</a> for accessing various parts of the current page (the text, the headers, the url, etc) and processing them with various xpath or regexp utilities.</p><h5>2.2.1<tt>&nbsp;</tt><a name="(part._.Navigation)"></a>Navigation</h5><p>Navigation forms request new pages from external sources, such as by fetching a document from the web.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._go))"></a><span title="Provided from: boris"><span class="RktSym">go</span></span><span class="hspace">&nbsp;</span><span class="RktVar">urls</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">urls</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">or/c</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">web</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">web/c</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Fetches every document specified in <span class="RktVar">urls</span> and executes <span class="RktVar">web</span> with each document in turn as the root document of <span class="RktVar">web</span>. If <span class="RktVar">urls</span> is a string, it is automatically promoted to a singleton list.</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://www.wikipedia.com"</span><span class="RktPn">)</span></p></blockquote><p>Fetches www.wikipedia.com and does nothing with the result.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://www.wikipedia.com"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._body%29%29" class="RktValLink" data-pltdoc="x">body</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara">Fetches www.wikipedia.com and prints the html of the returned page.
                                    </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">curry</span><span class="hspace">&nbsp;</span><span class="RktSym">string-append</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://en.wikipedia.org/wiki/"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"John_Entwistle"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Boris_the_spider"</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._body%29%29" class="RktValLink" data-pltdoc="x">body</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>Fetches John Entwistle&rsquo;s wiki page and prints the html, then fetches Boris the Spider&rsquo;s page and prints the html.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://www.wikipedia.com"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//a/@href/text()"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._body%29%29" class="RktValLink" data-pltdoc="x">body</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Fetches www.wikipedia.com, then collects each link on the page, fetches it, and prints the resulting html.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._submit))"></a><span title="Provided from: boris"><span class="RktSym">submit</span></span><span class="hspace">&nbsp;</span><span class="RktVar">www-forms</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">www-forms</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">list</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktVar">string?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">pair?</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">web</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">web/c</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Submits each form in <span class="RktVar">www-forms</span> and runs <span class="RktVar">web</span> with each resulting document as the root document. Designed to be used with the <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._forms%29%29" class="RktValLink" data-pltdoc="x">forms</a></span> query form.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"https://email.foo.com"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">submit</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._forms%29%29" class="RktValLink" data-pltdoc="x">forms</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">(</span><span class="RktVal">username</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">"bar"</span><span class="RktVal">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">(</span><span class="RktVal">password</span><span class="hspace">&nbsp;</span><span class="RktVal">. </span><span class="RktVal">"baz"</span><span class="RktVal">)</span><span class="RktVal">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//tr[@class='subject']/td/text()"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Requests the home page for the hypothetical webmail service email.foo.com, submits the first form on the page (overwriting the default username and password values with appropriate login credentials), and prints a list of subject lines for emails in the inbox.</p><h5>2.2.2<tt>&nbsp;</tt><a name="(part._.Extraction)"></a>Extraction</h5><p>Extraction forms return data discovered during the crawl to the host program.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._extract))"></a><span title="Provided from: boris"><span class="RktSym">extract</span></span><span class="hspace">&nbsp;</span><span class="RktVar">datum</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">datum</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">any/c</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">web</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">web/c</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Yields <span class="RktVar">datum</span> to the spider&rsquo;s generator. The values <span class="RktVal">#f</span> and <span class="RktSym">void?</span> are ignored by the extractor, permitting the use of expressions such as <span class="RktSym">when</span> to extract data conditionally.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://en.wikipedia.org/wiki/John_Entwistle"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//td[@class='nickname']/text()"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Extracts the name and nickname (both of which have class "nickname") and yields the list <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"John Alec Entwistle"</span><span class="stt"> </span><span class="RktVal">"The Ox, Thunderfingers, The Quiet One, Big Johnny Twinkle"</span><span class="RktVal">)</span> to the spider.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://en.wikipedia.org/wiki/Boris_the_Spider"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">unless</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">empty?</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//td[@class='nickname']/text()"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//td[@class='nickname']/text()"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Extracts nothing, as the Boris the Spider page has no "nickname" field. No value is yielded to the spider.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._extract/list))"></a><span title="Provided from: boris"><span class="RktSym">extract/list</span></span><span class="hspace">&nbsp;</span><span class="RktVar">data</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">data</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">listof</span><span class="hspace">&nbsp;</span><span class="RktVar">any/c</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">web</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">web/c</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Yields each element of <span class="RktVar">data</span> to the spider&rsquo;s generator in sequence. The values <span class="RktVal">#f</span> and <span class="RktSym">void?</span> as elements of <span class="RktVar">data</span> are ignored by the extractor, permitting the use of expressions such as <span class="RktSym">when</span> to extract data conditionally. This form composes well with <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span> forms, which return lists.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://en.wikipedia.org/wiki/John_Entwistle"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract/list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//td[@class='nickname']/text()"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Extracts the name and nickname (both of which have class "nickname") and yields the values <span class="RktVal">"John Alec Entwistle"</span> and <span class="RktVal">"The Ox, Thunderfingers, The Quiet One, Big Johnny Twinkle"</span> to the spider in sequence.</p><h5>2.2.3<tt>&nbsp;</tt><a name="(part._.Binding)"></a>Binding</h5><p>Binding forms bind identifiers in the spider&rsquo;s memory environment for use later in the crawl, which can be useful for assembling extractable entities whose data is spread across several pages.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._let/web))"></a><span title="Provided from: boris"><span class="RktSym">let/web</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">val-expr</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Largely analagous to the racket/base variant. Binds <span class="RktVar">val-expr</span>s to <span class="RktVar">id</span>s for use further down in the web. Values can be extracted with <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span>.</div></p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://en.wikipedia.org/wiki/List_of_bass_guitarists"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let/web</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">bassist</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//div[@id='mw-content-text']/ul[position()&gt;1]/li/a[text()='John Entwistle']/parent::li"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">band</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/li/a[2]/text()"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bassist</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/li/a[1]/@href/text()"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bassist</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span><span class="hspace">&nbsp;</span><span class="RktSym">band</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//td[@class='nickname']/text()"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Fetches Wikipedia&rsquo;s list of bassists, binds Entwistle&rsquo;s entry to <span class="RktSym">bassist</span> and Entwistle&rsquo;s band to <span class="RktSym">band</span>, fetches Entwistle&rsquo;s page, and finally displays Entwistle&rsquo;s name paired with the band name bound earlier.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._var))"></a><span title="Provided from: boris"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Evaluates to a value previously bound to <span class="RktVar">id</span> with a binding form. See <span class="RktSym">let</span> for example. Will probably be replaced by direct variable reference in future versions.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._for/web))"></a><span title="Provided from: boris"><span class="RktSym">for/web</span></span><span class="hspace">&nbsp;</span><span class="RktVar">for-clause</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Binds values in the usual way and executes <span class="RktVar">web</span> once for each value bound. Values can be extracted with <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span>.
                                       </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"http://en.wikipedia.org/wiki/List_of_bass_guitarists"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">bassist</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//div[@id='mw-content-text']/ul[position()&gt;1]/li"</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let/web</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">band</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/li/a[2]/text()"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bassist</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"/li/a[1]/@href/text()"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">bassist</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span><span class="RktVal">'</span><span class="RktVal">band</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//td[@class='nickname']/text()"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">An extension of the <span class="RktSym">let/web</span> example. Iterates over bassists, storing their band and pairing it with their name as extracted on the clicked-through page.</div></p><h5>2.2.4<tt>&nbsp;</tt><a name="(part._.Control)"></a>Control</h5><p>Control forms dynamically alter the sub-trees the spider will visit next, allowing for control constructs such as recursion, which can concisely express common tasks like pagination and full-site mirroring.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._label))"></a><span title="Provided from: boris"><span class="RktSym">label</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">webs</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">id</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">identifier</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">webs</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">web/c</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Binds the current position in the web to the <span class="RktVar">id</span> identifier. The spider can be returned here recursively from the sub-web with the <span class="RktSym">recur</span> command. This recursion form is useful anywhere code needs to be repeated an unknown number of times based on pages that have yet to be crawled. Full-site crawls and pagination are two common use cases.
                                             </div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktVal">"foo.com"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">label</span><span class="hspace">&nbsp;</span><span class="RktSym">click-all-links</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">go</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"//a/@href/text()"</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">extract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._body%29%29" class="RktValLink" data-pltdoc="x">body</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">recur</span><span class="hspace">&nbsp;</span><span class="RktSym">click-all-links</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>This will crawl every link on foo.com and extract the html of every page encountered. It will then click every link on the returned pages and repeat the process until there are no more links on any page encountered, at which point the <span class="RktSym">go</span> form will find no links and the <span class="RktSym">recur</span> form will not run. This code will therefore download an entire site (more care would have to be taken to avoid external links). This form will probably be folded into let in future versions.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._recur))"></a><span title="Provided from: boris"><span class="RktSym">recur</span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the spider to the section of the web bound to <span class="RktVar">id</span>. See <span class="RktSym">lambda</span> for examples.</div></p><h4>2.3<tt>&nbsp;</tt><a name="(part._.I.O)"></a>IO</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._show))"></a><span title="Provided from: boris"><span class="RktSym">show</span></span><span class="hspace">&nbsp;</span><span class="RktVar">value</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Displays the value to the <span class="RktSym">current-output-port</span>. Mainly useful for debugging or progress monitoring.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._boris/main..rkt)._download))"></a><span title="Provided from: boris"><span class="RktSym">download</span></span><span class="hspace">&nbsp;</span><span class="RktVar">path</span><span class="hspace">&nbsp;</span><span class="RktVar">web</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Writes the current (body) to the file specified by path. This can be useful for getting a closer look at a page with complex markup.</div></p><h4>2.4<tt>&nbsp;</tt><a name="(part._.Selectors)"></a><a name="(mod-path._boris/selectors)"></a>Selectors</h4><p><table cellspacing="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/require.html#%28form._%28%28lib._racket%2Fprivate%2Fbase..rkt%29._require%29%29" class="RktStxLink" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._boris%2Fselectors%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">boris/selectors</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <span class="stt">boris</span></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._head))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._head%29%29" class="RktValLink" data-pltdoc="x">head</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._cons%2Fc%29%29" class="RktValLink" data-pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/symbols.html#%28def._%28%28quote._~23~25kernel%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the headers of the most recent response.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._body))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._body%29%29" class="RktValLink" data-pltdoc="x">body</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the text of the current page.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._url))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._url%29%29" class="RktValLink" data-pltdoc="x">url</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/net/url.html#%28def._%28%28lib._net%2Furl-structs..rkt%29._url~3f%29%29" class="RktValLink" data-pltdoc="x">net/url?</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the current url.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._previous-request))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._previous-request%29%29" class="RktValLink" data-pltdoc="x">previous-request</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">request?</span></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the <span class="RktSym"><span class="badlink"><span class="RktValLink">request</span></span></span> corresponding to the current page.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._var))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._var%29%29" class="RktValLink" data-pltdoc="x">var</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">key</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._any%2Fc%29%29" class="RktValLink" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">key</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/symbols.html#%28def._%28%28quote._~23~25kernel%29._symbol~3f%29%29" class="RktValLink" data-pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the value currently bound to <span class="RktVar">key</span> by one of Boris&rsquo; binding forms.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._xpath))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>[<span class="RktVar">html</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">html</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">browser-body</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">current-document</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Applies <span class="RktVar">query</span> to <span class="RktVar">html</span> and returns a list of matches. By default, html is the text of the current page.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._xpath/text))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%2Ftext%29%29" class="RktValLink" data-pltdoc="x">xpath/text</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>[<span class="RktVar">html</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string%29%29" class="RktValLink" data-pltdoc="x">string</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">query</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">html</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">browser-body</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">current-document</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Appends "/text()" to <span class="RktVar">query</span>, applies it to <span class="RktVar">html</span> and returns a list of matches. Unlike <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span>, <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%2Ftext%29%29" class="RktValLink" data-pltdoc="x">xpath/text</a></span> will preserve empty nodes as "" rather than skipping them. By default, html is the text of the current page.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._forms))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._forms%29%29" class="RktValLink" data-pltdoc="x">forms</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">data</span><span class="hspace">&nbsp;</span><span class="RktVar">html</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><span class="badlink"><span class="RktValLink">html:form/c</span></span></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">data</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/dicts.html#%28def._%28%28lib._racket%2Fdict..rkt%29._dict~3f%29%29" class="RktValLink" data-pltdoc="x">dict?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">html</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._or%2Fc%29%29" class="RktValLink" data-pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">browser-body</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">current-document</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Scans <span class="RktVar">html</span> for any html forms and returns a list of <span class="RktSym">form/c</span>s ready to supply to the submit form. Each form&rsquo;s fields will be filled out with any name/value pairs supplied in <span class="RktVar">data</span>. If <span class="RktVar">html</span> is provided, html will be used instead of the default of the current page text. If <span class="RktVar">html</span> is a list, forms will run on each element of the list and all forms found in any element will be returned in a flattened list. This makes <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._forms%29%29" class="RktValLink" data-pltdoc="x">forms</a></span> suitable for use with <span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._xpath%29%29" class="RktValLink" data-pltdoc="x">xpath</a></span> to submit only specific forms.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._links))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._links%29%29" class="RktValLink" data-pltdoc="x">links</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">link-regexp</span><span class="hspace">&nbsp;</span><span class="RktVar">html</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string%29%29" class="RktValLink" data-pltdoc="x">string</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">link-regexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/regexp.html#%28def._%28%28quote._~23~25kernel%29._regexp~3f%29%29" class="RktValLink" data-pltdoc="x">regexp?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#rx"."</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">html</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">browser-body</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">current-document</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns all urls extracted from links on the current page (or passed in <span class="RktVar">html</span>) matching <span class="RktVar">link-regexp</span>.</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._boris/selectors..rkt)._links/text))"></a><span title="Provided from: boris/selectors"><span class="RktSym"><a href="#%28def._%28%28lib._boris%2Fselectors..rkt%29._links%2Ftext%29%29" class="RktValLink" data-pltdoc="x">links/text</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">link-text-regexp</span><span class="hspace">&nbsp;</span>[<span class="RktVar">html</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/data-structure-contracts.html#%28def._%28%28lib._racket%2Fcontract%2Fprivate%2Fmisc..rkt%29._listof%29%29" class="RktValLink" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string%29%29" class="RktValLink" data-pltdoc="x">string</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">link-text-regexp</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/regexp.html#%28def._%28%28quote._~23~25kernel%29._regexp~3f%29%29" class="RktValLink" data-pltdoc="x">regexp?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">html</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="file:///home/apocalypsemystic/src/racket/racket/doc/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3f%29%29" class="RktValLink" data-pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">browser-body</span></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">current-document</span></span></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns all urls extracted from links on the current page (or passed in <span class="RktVar">html</span>) with link text matching <span class="RktVar">link-text-regexp</span>.</div></p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="Boris_Quickstart_Guide.html" title="backward to &quot;1 Boris Quickstart Guide&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Boris The (Web) Spider&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="Boris_Internals_and_Extension.html" title="forward to &quot;3 Boris Internals and Extension&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>